<% benches_game = BenchesGame.where(game_id: params[:game], bench_id: @benchmark.id).last %>
<% if params[:type] == "full" %>
    <% if params[:game] != "total" %>
        <%# if browser.device.mobile? %>
            //$('#gameContent').html("<%#= j render partial: 'benches/graphs_mobile', locals: {benches_game: benches_game} %>")
        <%# else %>
            $('#gameContent').html("<%= j render partial: 'benches/graphs', locals: {benches_game: benches_game} %>")
        <%# end %>
    <% else %>
        $('#gameContent').html("<%= j render partial: 'benches/total_graphs', locals: {benchmark: @benchmark} %>")
    <% end %>
<% end %>

<% if params[:type] == "fps" %>
$('#mobileGraph').html(
        "<%= j line_chart fps_benches_game_path(benches_game),
        points: false, curve: false, download: true, title: "FPS", legend: true,
        height: '400px', min: benches_game.min, xmax: benches_game.inputs.count / benches_game.types.count,
        adapter: "chartjs", library: {scales: {xAxis: { gridLines: { color: "#707073"}}},title: { fontColor: "white"}} %>"
)
<% end %>

<% if params[:type] == "frametime" %>
     $('#mobileGraph').html(
        "<%= j line_chart frametime_benches_game_path(benches_game),
        points: false, curve: false, download: true, title: "Frametime", legend: true,
        height: '400px', xmax: benches_game.inputs.count / benches_game.types.count,
        adapter: "chartjs", library: {scales: {xAxis: { gridLines: { color: "#707073"}}},title: { fontColor: "white"}} %>"
        )
<% end %>

<% if params[:type] == "cpu" %>
        $('#mobileGraph').html(
        "<%= j line_chart cpu_benches_game_path(benches_game),
        points: false, curve: false, download: true, title: "CPU Load", legend: true,
        height: '400px', xmax: benches_game.inputs.count / benches_game.types.count,
        adapter: "chartjs", library: {scales: {xAxis: { gridLines: { color: "#707073"}}},title: { fontColor: "white"}} %>"
        )
<% end %>

<% if browser.device.mobile? %>
    $.each(Chartkick.charts, function(name, chart) {
        addCallback(name, chart);
    })
<% end %>